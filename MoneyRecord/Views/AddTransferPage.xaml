<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MoneyRecord.ViewModels"
             xmlns:behaviors="clr-namespace:MoneyRecord.Behaviors"
             xmlns:ext="clr-namespace:MoneyRecord.Extensions"
             x:Class="MoneyRecord.Views.AddTransferPage"
             x:DataType="viewmodels:AddTransferViewModel"
             Title="{Binding Title}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">

            <Label Text="{ext:Localize Date}" FontSize="16" FontAttributes="Bold"/>
            <DatePicker Date="{Binding SelectedDate}" 
                       Format="D"
                       FontSize="16"/>

            <Label Text="{ext:Localize FromAccount}" FontSize="16" FontAttributes="Bold"/>
            <Picker ItemsSource="{Binding Accounts}"
                   SelectedItem="{Binding SelectedSourceAccount}"
                   ItemDisplayBinding="{Binding Name}"
                   Title="{ext:Localize SelectSourceAccount}"
                   FontSize="16"/>
            <Label Text="{Binding SourceAccountBalanceText}" 
                   FontSize="14" 
                   TextColor="{AppThemeBinding Light=#2E7D32, Dark=#66BB6A}"
                   IsVisible="{Binding SourceAccountBalanceText, Converter={StaticResource StringToBoolConverter}}"/>

            <Label Text="{ext:Localize ToAccount}" FontSize="16" FontAttributes="Bold"/>
            <Picker ItemsSource="{Binding Accounts}"
                   SelectedItem="{Binding SelectedDestinationAccount}"
                   ItemDisplayBinding="{Binding Name}"
                   Title="{ext:Localize SelectDestinationAccount}"
                   FontSize="16"/>

            <Label Text="{ext:Localize Amount}" FontSize="16" FontAttributes="Bold"/>
            <Entry Text="{Binding Amount}" 
                   Placeholder="0.00"
                   Keyboard="Numeric"
                   FontSize="16">
                <Entry.Behaviors>
                    <behaviors:CurrencyMaskBehavior ShowCurrencySymbol="True" DecimalPlaces="2"/>
                </Entry.Behaviors>
            </Entry>

            <Label Text="{ext:Localize TransferDescription}" FontSize="16" FontAttributes="Bold"/>
            <Entry Text="{Binding Description}" 
                   Placeholder="{ext:Localize TransferOptional}"
                   FontSize="16"/>

            <Label Text="{ext:Localize RequiredFields}" FontSize="12" TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" Margin="0,5,0,0"/>

            <Grid ColumnDefinitions="*,*" ColumnSpacing="10" Margin="0,20,0,0">
                <Button Grid.Column="0" 
                       Text="{ext:Localize Cancel}" 
                       Command="{Binding CancelCommand}"
                       BackgroundColor="Gray"/>
                <Button Grid.Column="1" 
                       Text="{ext:Localize TransferButton}" 
                       Command="{Binding SaveCommand}"
                       BackgroundColor="{AppThemeBinding Light=#FF9800, Dark=#FFB74D}"/>
            </Grid>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
